-- Eliminar la tabla si ya existe
DROP TABLE IF EXISTS usuarios;

-- Crear la tabla usuarios
CREATE TABLE usuarios (
    id INT AUTO_INCREMENT PRIMARY KEY,
    Rut VARCHAR(12) NOT NULL,
    Nombres VARCHAR(100) NOT NULL,
    Apellidos VARCHAR(100) NOT NULL,
    Correo VARCHAR(100) NOT NULL,
    Clave VARCHAR(255) NOT NULL,
    Telefono VARCHAR(20) NOT NULL,
    FechaRegistro DATETIME NOT NULL,
    Activo TINYINT(1) DEFAULT 1,
    IntentosFallidos TINYINT(1) DEFAULT 0,
    UltimoAcceso DATETIME NULL,
    TokenRecuperacion VARCHAR(255) NULL,
    TokenExpiracion DATETIME NULL,
    
CREATE TABLE mascotas (
    id INT AUTO_INCREMENT PRIMARY KEY,
    nombre_mascota VARCHAR(100) NOT NULL,
    especie ENUM('Perro', 'Gato', 'Ave', 'Conejo', 'Hamster', 'Otro') NOT NULL,
    raza VARCHAR(100) NOT NULL,
    sexo ENUM('Macho', 'Hembra') NOT NULL,
    edad DECIMAL(3,1) NOT NULL CHECK (edad >= 0 AND edad <= 30),
    peso DECIMAL(5,1) NOT NULL CHECK (peso >= 0.1 AND peso <= 100),
    color_descripcion VARCHAR(200) NOT NULL,
    numero_microchip VARCHAR(50) DEFAULT NULL,
    fecha_declaracion TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    fecha_actualizacion TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    estado ENUM('Activa', 'Inactiva', 'Pendiente') DEFAULT 'Activa',

    -- Ãndices para mejorar rendimiento
    INDEX idx_especie (especie),
    INDEX idx_fecha_declaracion (fecha_declaracion),
    INDEX idx_microchip (numero_microchip),
    INDEX idx_estado (estado)
);    
    UNIQUE INDEX idx_rut (Rut),
    UNIQUE INDEX idx_correo (Correo),
    INDEX idx_apellidos (Apellidos),
    INDEX idx_fecha_registro (FechaRegistro)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;


ESTA ES LA NUEVA BASE DE DATOS CHICOS POR FAVOR SI TIENEN LA OTRA CREADA POR FAVOR PONER EL CODIGO COMPLETO.